From c1532708c31060072005bca8dcf12a03e64e3e29 Mon Sep 17 00:00:00 2001
From: ahamod <ahamod3.1416@gmail.com>
Date: Mon, 9 Dec 2024 22:29:29 +0100
Subject: [PATCH] Modify nor flash settings

Signed-off-by: ahamod <ahamod3.1416@gmail.com>
---
 plat/st/stm32mp1/stm32mp1_boot_device.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/plat/st/stm32mp1/stm32mp1_boot_device.c b/plat/st/stm32mp1/stm32mp1_boot_device.c
index 12aa1c2da..086da9ad4 100644
--- a/plat/st/stm32mp1/stm32mp1_boot_device.c
+++ b/plat/st/stm32mp1/stm32mp1_boot_device.c
@@ -197,13 +197,13 @@ int plat_get_nor_data(struct nor_device *device)
 	device->size = SZ_64M;
 
 	zeromem(&device->read_op, sizeof(struct spi_mem_op));
-	device->read_op.cmd.opcode = SPI_NOR_OP_READ_1_1_4;
+	device->read_op.cmd.opcode = SPI_NOR_OP_READ_1_1_2;
 	device->read_op.cmd.buswidth = SPI_MEM_BUSWIDTH_1_LINE;
 	device->read_op.addr.nbytes = 3U;
 	device->read_op.addr.buswidth = SPI_MEM_BUSWIDTH_1_LINE;
 	device->read_op.dummy.nbytes = 1U;
 	device->read_op.dummy.buswidth = SPI_MEM_BUSWIDTH_1_LINE;
-	device->read_op.data.buswidth = SPI_MEM_BUSWIDTH_4_LINE;
+	device->read_op.data.buswidth = SPI_MEM_BUSWIDTH_2_LINE;
 	device->read_op.data.dir = SPI_MEM_DATA_IN;
 
 	return 0;
-- 
2.34.1

